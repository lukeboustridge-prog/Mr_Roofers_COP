---
phase: 09-unified-navigation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/navigation/SourceFilterTabs.tsx
  - components/navigation/CapabilityFilters.tsx
  - components/navigation/ComingSoonPlaceholder.tsx
  - components/navigation/index.ts
autonomous: true

must_haves:
  truths:
    - "User can see source filter tabs (All / MRM COP / RANZ Guide) for switching content views"
    - "User can see capability filter checkboxes (3D, Steps, Warnings, Case Law)"
    - "User sees Coming Soon placeholder for topics/substrates with no content"
  artifacts:
    - path: "components/navigation/SourceFilterTabs.tsx"
      provides: "Tabs component for source filtering with URL state sync"
      min_lines: 50
      exports: ["SourceFilterTabs"]
    - path: "components/navigation/CapabilityFilters.tsx"
      provides: "Checkbox filters for content capabilities"
      min_lines: 40
      exports: ["CapabilityFilters"]
    - path: "components/navigation/ComingSoonPlaceholder.tsx"
      provides: "Empty state placeholder for sections without content"
      min_lines: 30
      exports: ["ComingSoonPlaceholder"]
    - path: "components/navigation/index.ts"
      provides: "Barrel export for navigation components"
  key_links:
    - from: "components/navigation/SourceFilterTabs.tsx"
      to: "components/ui/tabs"
      via: "shadcn Tabs import"
      pattern: "import.*Tabs.*from.*@/components/ui/tabs"
    - from: "components/navigation/CapabilityFilters.tsx"
      to: "components/ui/checkbox"
      via: "shadcn Checkbox import"
      pattern: "import.*Checkbox.*from.*@/components/ui/checkbox"
---

<objective>
Create reusable filter components for unified navigation.

Purpose: Enable users to filter topic listings by source (MRM COP / RANZ Guide) and by content capabilities (3D models, steps, warnings, case law). Provides consistent empty state handling.

Output: SourceFilterTabs, CapabilityFilters, and ComingSoonPlaceholder components ready for integration.
</objective>

<execution_context>
@C:\Users\LukeBoustridge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\LukeBoustridge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-unified-navigation/09-RESEARCH.md

# shadcn components to use
@components/ui/tabs.tsx
@components/ui/checkbox.tsx

# Pattern reference from research
# See 09-RESEARCH.md Pattern 2 (Tabs with URL State) and Pattern 3 (Capability Checkboxes)

# Existing authority icons for capability badges
@components/authority/ContentCapabilityBadges.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SourceFilterTabs Component</name>
  <files>components/navigation/SourceFilterTabs.tsx</files>
  <action>
Create a client component for source filtering using shadcn Tabs with URL state sync.

Implementation:

```typescript
'use client';

import { useRouter, useSearchParams } from 'next/navigation';
import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';
import { Badge } from '@/components/ui/badge';
import { BookOpen, Library } from 'lucide-react';

interface SourceFilterTabsProps {
  allCount: number;
  mrmCount: number;
  ranzCount: number;
  children: React.ReactNode;
}
```

1. Read active source from searchParams.get('source') || 'all'
2. On tab change, update URL using router.replace with scroll: false
3. When value is 'all', delete the 'source' param from URL
4. Render three tabs:
   - "All Sources" with allCount badge
   - "MRM COP" with mrmCount badge and BookOpen icon (blue styling)
   - "RANZ Guide" with ranzCount badge and Library icon
5. TabsContent wraps children (the filtered detail list)
6. Use proper ARIA labels and keyboard navigation (provided by Radix)

Follow Pattern 2 from 09-RESEARCH.md for URL state sync.

Export as named export.
  </action>
  <verify>
Run `npm run build` - no errors in components/navigation/.
Component renders without hydration errors.
Tab state persists in URL after navigation.
  </verify>
  <done>
SourceFilterTabs component exists with three tabs (All, MRM COP, RANZ Guide) and syncs active tab to URL searchParams.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create CapabilityFilters and ComingSoonPlaceholder Components</name>
  <files>
components/navigation/CapabilityFilters.tsx
components/navigation/ComingSoonPlaceholder.tsx
components/navigation/index.ts
  </files>
  <action>
**CapabilityFilters Component:**

Create a client component with checkboxes for content capability filtering.

```typescript
'use client';

import { useRouter, useSearchParams } from 'next/navigation';
import { Checkbox } from '@/components/ui/checkbox';
import { Label } from '@/components/ui/label';
import { Box, ListChecks, AlertTriangle, Scale } from 'lucide-react';
```

1. Read capabilities from searchParams.get('capabilities')?.split(',') || []
2. Define four capability options:
   - '3d': Has 3D Model (Box icon, blue)
   - 'steps': Has Installation Steps (ListChecks icon, green)
   - 'warnings': Has Warnings (AlertTriangle icon, amber)
   - 'caselaw': Related Case Law (Scale icon, red)
3. On checkbox toggle, update URL with comma-separated capability values
4. If no capabilities selected, delete the 'capabilities' param
5. Preserve other params (source) when updating
6. Style as horizontal flex on desktop, vertical on mobile (use flex-wrap)

Follow Pattern 3 from 09-RESEARCH.md.

**ComingSoonPlaceholder Component:**

```typescript
interface ComingSoonPlaceholderProps {
  title: string;          // e.g., "Membrane Roofing"
  subtitle?: string;      // e.g., "for Flashings topic"
  showBrowseButtons?: boolean;  // default true
}
```

1. Render a dashed-border Card with centered content
2. Show FileText icon (large, slate-400)
3. "Coming Soon" heading
4. Descriptive text: "{title} details are currently being prepared."
5. If showBrowseButtons: render "Browse Topics" and "Search All Details" buttons
6. Use same styling pattern as category-client.tsx empty state

**Barrel Export (index.ts):**

Update or create `components/navigation/index.ts` to export:
- SourceFilterTabs
- CapabilityFilters
- ComingSoonPlaceholder
- Breadcrumbs (re-export existing)
  </action>
  <verify>
Run `npm run build` - no errors.
Import `{ SourceFilterTabs, CapabilityFilters, ComingSoonPlaceholder }` from '@/components/navigation' works.
Components render without errors.
  </verify>
  <done>
CapabilityFilters with four checkbox options, ComingSoonPlaceholder with consistent empty state, and barrel export for navigation components.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. All three components export correctly from @/components/navigation
3. SourceFilterTabs syncs tab state to URL ?source= parameter
4. CapabilityFilters syncs checkbox state to URL ?capabilities= parameter
5. ComingSoonPlaceholder renders styled empty state
6. No hydration mismatches in development
</verification>

<success_criteria>
- SourceFilterTabs renders three tabs and updates URL on tab change
- CapabilityFilters renders four checkboxes and updates URL on toggle
- ComingSoonPlaceholder renders consistent empty state
- All components can be imported from @/components/navigation
</success_criteria>

<output>
After completion, create `.planning/phases/09-unified-navigation/09-02-SUMMARY.md`
</output>
